<!DOCTYPE html>
<html lang="zxx">
<head>
<meta charset="UTF-8">
<meta name="description" content="Holy Shivana, Best Holiday resorts in Rishikesh, Resorts in Rishikesh, Hotel in Neelkanth Rishikesh Resorts">
    <meta name="keywords" content="Holy Shivana, Best Holiday resorts in Rishikesh, Resorts in Rishikesh, Hotel in Neelkanth Rishikesh Resorts">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Holy Shivana Rishikesh</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon-96x96.png">


<link href="https://fonts.googleapis.com/css?family=Lora:400,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Cabin:400,500,600,700&amp;display=swap" rel="stylesheet">
<link href='https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css' rel='stylesheet'>
<link href='' rel='stylesheet'>
<link rel="stylesheet" href="css/roomBooking.css" type="text/css">
<link rel="stylesheet" href="css/css-bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="css/css-font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="css/css-elegant-icons.css" type="text/css">
<link rel="stylesheet" href="css/css-flaticon.css" type="text/css">
<link rel="stylesheet" href="css/css-owl.carousel.min.css" type="text/css">
<link rel="stylesheet" href="css/css-nice-select.css" type="text/css">
<link rel="stylesheet" href="css/css-jquery-ui.min.css" type="text/css">
<link rel="stylesheet" href="css/css-magnific-popup.css" type="text/css">
<link rel="stylesheet" href="css/css-slicknav.min.css" type="text/css">
<link rel="stylesheet" href="css/css-style.css" type="text/css">
</head>
<body>

<div id="preloder">
<div class="loader"></div>
</div>

<div class="offcanvas-menu-overlay"></div>
<div class="canvas-open">
<i class="icon_menu"></i>
</div>
<div class="offcanvas-menu-wrapper">
<div class="canvas-close">
<i class="icon_close"></i>
</div>
<div class="search-icon  search-switch">
<i class="icon_search"></i>
</div>
<div class="header-configure-area">

<a href="roomBooking.html" class="bk-btn">Book Now</a>
</div>






<!-- for phone menu  -->
<nav class="mainmenu mobile-menu">
<ul>
<li ><a href="index.html">Home</a></li>
<li><a href="rooms.html">Rooms</a></li>
<li><a href="about-us.html">About Us</a></li>

<li><a href="blog.html">News</a></li>
<li><a href="contact.html">Contact</a></li>
</ul>
</nav>


<div id="mobile-menu-wrap"></div>
<ul class="top-widget">
<li><i class="fa fa-phone"></i> +91 33**********</li>
<li>info@exmaple.com</li>
</ul>
</div>


<header class="header-section">
<div class="top-nav">
<div class="container">
<div class="row">
<div class="col-lg-6">
<ul class="tn-left">
<li><i class="fa fa-phone"></i> +91 33**********</li>
<li><i class="fa fa-envelope"/> info@exmaple.com</i> 
</ul>
</div>
<div class="col-lg-6">
<div class="tn-right">
<a href="roomBooking.html" class="bk-btn">Book Now</a>
</div>
</div>
</div>
</div>
</div>
<div class="menu-item">
<div class="container">
<div class="row">
<div class="col-lg-2">
<div class="logo" style="padding:0px !important">
<a href="index.html">
<img src="images/logo/The-2 (1).png" alt="" style="width: 85px">
</a>
</div>
</div>



<!-- for main manu -->


<div class="col-lg-10">
<div class="nav-menu">
<nav class="mainmenu">
<ul>
<li ><a href="index.html">Home</a></li>
<li><a href="rooms.html">Rooms</a></li>
<li><a href="about-us.html">About Us</a></li>
<li><a href="blog.html">News</a></li>
<li><a href="contact.html">Contact</a></li>
</ul>
</nav>
<div class="nav-right search-switch">
<i class="icon_search"></i>
</div>
</div>
</div>
</div>
</div>
</div>
</header>


<section>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css" integrity="sha256-zmfNZmXoNWBMemUOo1XUGFfc0ihGGLYdgtJS3KCr/l0=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.css" integrity="sha256-a2tobsqlbgLsWs7ZVUGgP5IvWZsx8bTNQpzsqCSm5mk=" crossorigin="anonymous" />
  <div class="container" class="booking-form" >
    <h1 class="brand">Book Now</h1>
    <div class="wrapper animated bounceInLeft">
      <div class="company-info">
    
        <h3>Holy Shivana</h3>
        <ul>
          <li><i class="fa fa-mobile"></i><a style="color: #0d0d0e;" href=“tel:555-666-7777”>555-666-7777</a></li>
          <li><i class="fa fa-envelope"></i>test@email.com</li>
        </ul>
      </div>
      <div class="contact">
    
        <form id ="booking-form"  >
         
          <p>
            <label>Full Name *</label>
           <input type="text" name="name" class="fieldI" id ="name" required>  
       
           
          </p>
          
        
        
          <p>
            <label>Email*</label>
            <input type="email" id = "email" class="fieldI" name="email" required >
       
          </p>
          <p>
            <label>Phone Number*</label>
            <input type="text" name="phone" id="Phone-Number" required>
         
       
          </p>

       
        
          <p class="full">
           
            <button type = "submit" id="booking-btn">Next</button>
           
            
          </p>
         
         
        </form>

        <form id ="pay-form" style="display: none;">
        <h2 title="Back" id = "back" class="arrow_left" ></h2></br>
          <p>
            <label> Room:</label>
            <input type="text" name="room" id ="pay-room" readonly>
          </p>
        
        
          <p>
            <label>CheckIn:</label>
            <input type="text" id = "CheckIn" name="pay-CheckOut" readonly >
           
          </p>
          <p>
            <label>CheckOut:</label>
            <input type="text" name="CheckOut" id="pay-CheckOut" readonly>
           
          </p>
          <div>
          <p  >
            <label> ₹ Total Price:</label>
            <input type="number" name="Price" id="pay-Price" readonly>
            <div  id ="loading" class="loading" style="    position: relative;
            top: -35px;
            left: 50%;
            display: block;
            right: 0;
            transform: translate(-50%, 0px); display: none;" > 
            </div> 
          </p>
        </div>
          <br>
          
     
         <div>
          <button id="rzp-button1" >Pay</button>
        </div>


        </form>
      
        <div id="payment-failed" style="display: none;">
          <h2>Sorry Payment Failed </h2><br>
          <span>Check your card details </details></span>
          <p id="error-message"></p>
          <button class="retry" id="retry-payment">Retry Payment</button><br></br>

           <span>if money is debited from your account contact to given number.</span></br></br>
          <button class="contact"id="contact-support"> <a style="color: #e0e0ec;" href=“tel:+91-22-67487200”>contact-support</a></button>
        </div>




     
     

</section>




<footer class="footer-section">
<div class="container">
<div class="footer-text">
<div class="row">
<div class="col-lg-4">
<div class="ft-about">
<div class="logo">
<a href="#">
<img src="images/logo/Footer-logo.png" alt="" style ="margin-top: -62px;">
</a>
</div>
<p>We inspire and reach millions of travelers<br> across 90 local websites</p>
<div class="fa-social">
<a href="#"><i class="fa fa-facebook"></i></a>
<a href="#"><i class="fa fa-twitter"></i></a>
<a href="#"><i class="fa fa-tripadvisor"></i></a>
<a href="#"><i class="fa fa-instagram"></i></a>
<a href="#"><i class="fa fa-youtube-play"></i></a>
</div>
</div>
</div>
<div class="col-lg-3 offset-lg-1">
<div class="ft-contact">
<h6>Contact Us</h6>
<ul>
<li>+91 33**********</li>
<li>info@exmaple.com</li>
<li>Tapovan,Rishikesh,Uttarakhand, India</li>
 </ul>
</div>
</div>
<div class="col-lg-3 offset-lg-1">
<div class="ft-newslatter">
<h6>New latest</h6>
<p>Get the latest updates and offers.</p>
<form action="#" class="fn-form">
<input type="text" placeholder="Email">
<button type="submit"><i class="fa fa-send"></i></button>
</form>
</div>
</div>
</div>
</div>
</div>
<div class="copyright-option">
<div class="container">
<div class="row">
<div class="col-lg-7">
<ul>
<li><a href="#">Contact</a></li>
<li><a href="#">Terms of use</a></li>
<li><a href="#">Privacy</a></li>
<li><a href="#">Environmental Policy</a></li>
</ul>
</div>
<div class="col-lg-5">
<div class="co-text"><p>
Copyright &copy;<script data-cfasync="false" src="js/cloudflare-static-email-decode.min.js"></script><script>document.write(new Date().getFullYear());</script> All rights reserved Holy Shivana
</p></div>
</div>
</div>
</div>
</div>
</footer>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>





if (!localStorage.getItem('redirect')) {
        window.location.replace("index.html");
    }




    document.getElementById("back").onclick = function(e){
      document.getElementById("booking-form").style.display = "block";
            document.getElementById("pay-form").style.display = "none";
      

    }
    const userData = JSON.parse(localStorage.getItem('rooms'));

const userDataString = sessionStorage.getItem("userData");
const date = JSON.parse(userDataString);

const checkIn = date.CheckIn
const checkOut = date.CheckOut


const id = userData.map(function(room) {
    return room.name;
});


const roomType = userData.map(function(room) {
    return room.roomType;
});











const room = JSON.parse(localStorage.getItem('rooms'));



 var form = document.getElementById('booking-btn')



     
 form.addEventListener('click', async function() {
        event.preventDefault(event)
        
   
        
       
        var name = document.getElementById('name').value
        var email = document.getElementById('email').value
        var phoneNumber = document.getElementById('Phone-Number').value
        if (!name || !email || !phoneNumber) {


    return;
  }
      

        const endpoint = "http://localhost:8080/api/v1/createOrder";
        const endpointRazerPay = "http://localhost:8080/api/v1/bookRoom";

        const userDataString = sessionStorage.getItem("price");
const totalRoomPrice = JSON.parse(userDataString);
      
        const data = {
  roomPrice:totalRoomPrice,
 
};


const dataforRoomBook = {
  roomPrice:totalRoomPrice,
  roomType:roomType[0],
  roomNumber:id,
  CheckIn: checkIn,
   CheckOut:checkOut,
   user: {
    name: name,
    email: email,
    phone: phoneNumber
  }
};

        fetch(endpoint, {
          method: "post",
          body: JSON.stringify(data),
          headers: {
    'Content-Type': 'application/json'
  }
        }).then((response) => response.json()).then((data) => {
        
          if(data.status==201){
           
            document.getElementById("booking-form").style.display = "none";
            document.getElementById("pay-form").style.display = "block";






 
           
  var form = document.getElementById("pay-form");

// Assign the values to the form fields

form.elements.room.value = roomType[0];
form.elements.CheckIn.value = checkIn ;
form.elements.CheckOut.value = checkOut;
form.elements.Price.value = totalRoomPrice;

            const options = {
  key: 'rzp_test_oooNJ6WEjLoDKB', 
  order_id: data.order.id, 
  name: 'Holy Shivana',
  description: 'Room Booking',
  amount: data.order.roomPrice, 

  currency: 'INR',
  handler: function (response){
      response.roomData= dataforRoomBook
      document.getElementById('loading').style.display = 'block';
  

    fetch(endpointRazerPay, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(response)
})
    .then((res) => res.json())
    .then((data) => {
      
      document.getElementById('loading')
    
        if (data.status === 201) {
          localStorage.setItem('redirect', true);
  window.location.href = 'Booked.html';

 
        } else {
           
  document.getElementById("pay-form").style.display = "none";
  document.getElementById("payment-failed").style.display = "block";
        }
    })
    .catch((error) => {
        console.error(error);
    });
    
  },
  prefill: {
    name: name,
    email: email,
    contact: phoneNumber
  },
  notes: {
    address: 'Note value'
  },
  theme: {
    color: '#dfa974'
  }
};

var rzp1 = new Razorpay(options);

rzp1.on('payment.failed', function (response){


  document.getElementById("pay-form").style.display = "none";
  document.getElementById("payment-failed").style.display = "block";


});
document.getElementById('retry-payment').onclick = function(e){
    rzp1.open();
    e.preventDefault();
}
document.getElementById('contact-support').onclick = function(e){
    window.location.href = "+91-22-67487200";
    e.preventDefault();
}



    document.getElementById('rzp-button1').onclick = function(e){
        rzp1.open();
        e.preventDefault();
    }

                


            }
        });

      })
 



</script>


<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script type='text/javascript' src='https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js'></script>
<script type='text/javascript' src='https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js'></script>
<script type='text/javascript'></script> 

<script src="js/7525-js-jquery-3.3.1.min.js"></script>
<script src="js/1982-js-bootstrap.min.js"></script>
<script src="js/1850-js-jquery.magnific-popup.min.js"></script>
<script src="js/4317-js-jquery-ui.min.js"></script>
<script src="js/2122-js-jquery.slicknav.js"></script>
<script src="js/4726-js-owl.carousel.min.js"></script>
<script src="js/9029-js-main.js"></script>

</body>
</html>